{% extends 'base.html' %}

{% block title %}Оформление заказа - {{ SITE_NAME }}{% endblock %}

{% block extra_css %}
<style>
    .checkout-container {
        max-width: 900px;
        margin: 0 auto;
    }
    
    .checkout-header {
        margin-bottom: 2rem;
        border-bottom: 1px solid #eee;
        padding-bottom: 1rem;
    }
    
    .cart-items {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }
    
    .cart-item {
        display: flex;
        align-items: center;
        border-bottom: 1px solid #eee;
        padding: 1rem 0;
    }
    
    .cart-item:last-child {
        border-bottom: none;
    }
    
    .item-image {
        width: 60px;
        height: 60px;
        border-radius: 8px;
        object-fit: cover;
        margin-right: 1rem;
    }
    
    .item-details {
        flex-grow: 1;
    }
    
    .item-price {
        text-align: right;
        font-weight: bold;
    }
    
    .order-summary {
        background-color: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
    }
    
    .total-row {
        font-size: 1.2rem;
        font-weight: bold;
        border-top: 2px solid #eee;
        padding-top: 1rem;
        margin-top: 1rem;
    }
    
    .checkout-btn {
        display: block;
        width: 100%;
        padding: 1rem;
        background: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        margin-top: 1rem;
        cursor: pointer;
    }
    
    .checkout-btn:hover {
        background: #218838;
    }
</style>
{% endblock %}

{% block content %}
<div class="container checkout-container">
    <div class="checkout-header">
        <h1>Оформление заказа</h1>
        <p>Пожалуйста, проверьте информацию о вашем заказе перед подтверждением.</p>
    </div>
    
    <div class="row">
        <div class="col-md-8">
            <div class="cart-items">
                <h2>Товары в корзине</h2>
                
                {% for item in items %}
                <div class="cart-item">
                    <img src="{{ item.photo_url }}" alt="{{ item.name }}" class="item-image">
                    <div class="item-details">
                        <h5>{{ item.name }}</h5>
                        <div>Количество: {{ item.quantity }} × {{ item.price }} ₽</div>
                    </div>
                    <div class="item-price">
                        {{ item.total }} ₽
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="order-summary">
                <h3>Итого по заказу</h3>
                
                <div class="summary-row">
                    <div>Количество товаров:</div>
                    <div>{{ items|length }}</div>
                </div>
                
                <div class="summary-row">
                    <div>Подытог:</div>
                    <div>{{ total_amount }} ₽</div>
                </div>
                
                <div class="summary-row total-row">
                    <div>Итого:</div>
                    <div>{{ total_amount }} ₽</div>
                </div>
                
                <form method="post" action="{% url 'orders:create_order' %}">
                    {% csrf_token %}
                    <button type="submit" class="checkout-btn">
                        Подтвердить заказ
                    </button>
                </form>
                
                <div class="mt-3">
                    <a href="{% url 'orders:cart' %}" class="btn btn-outline-secondary w-100">
                        Вернуться в корзину
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 